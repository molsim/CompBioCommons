<h1 id="compbiobase---live-examples">CompBioBase - Live-Examples</h1>
<h2 id="live-examples-le-development-guidelines">Live-examples (LE) development guidelines</h2>
<p>Folder <a href="TEMPLATE/">TEMPLATE</a> contains a template, use it to start the development of a new live-example, or reformat an existing example.</p>
<h3 id="naming-and-version-control">Naming and version control</h3>
<p>Every LE release which has substantial changes should be assigned a version number which sould appera in the header of README.md. A history of changes should be provided in HISTORY.md file together with hashes of commits that correspond to the current and previous versions. Folder name should be concise but suggestive of the example nature and start whith a letter code from <a href="../folder_codes.md">this list</a> depending on the LE topic. If LE is forked to adjust it to slightly different conditions (eg. software or hardware version) the new folder name should be derived by appending a corresonding descriptor (eg. MD_nucleosome_NAMD_v1.9_wCUDA). For such forked LE the information about their parent (sister) LE should be provided in the header of README.md and the corresponding versions have to be specified.</p>
<h3 id="tags">Tags</h3>
<p>LE are organized with the help of tags (keywords) from the dictionary listed in <a href="../tags_list.md">tags_list.md</a>. Every LE folder should contain tags.md file which list tags from the dictionary one per line.</p>
<h3 id="le-status">LE status</h3>
<p>If LE adheres to the strict guidelines described below its status is READY, otherwise it is RAW. The status should be stated in the header of README.md.</p>
<h3 id="live-example-components-and-directory-structure">Live-example components and directory structure</h3>
<h4 id="readme.md">README.md</h4>
<p>The README.md file is the main file describing the live-example, theoretical background, goals, prerequisitives (including software), contents of the live-example, step-by-step instructions and anticipated outcomes. Normally, it should have following sections:</p>
<p>The files should be written using strick Markdown syntax (not GFM?) in order to be understandable by pandoc.</p>
<pre class="sourceCode python"><code class="sourceCode python">
<span class="ch">import</span> numpy <span class="ch">as</span> np
<span class="ch">import</span> matplotlib.pyplot <span class="ch">as</span> plt
<span class="ch">from</span> matplotlib <span class="ch">import</span> rc
<span class="ch">import</span> argparse
<span class="ch">import</span> csv
<span class="ch">from</span> pylab <span class="ch">import</span> *
<span class="ch">from</span> prody <span class="ch">import</span> *
<span class="co">#import pickle</span>
EVNUM=<span class="dv">40</span>

<span class="kw">def</span> main():
    

    
    matplotlib.rc(<span class="st">&#39;font&#39;</span>,**{<span class="st">&#39;family&#39;</span>:<span class="st">&#39;sans-serif&#39;</span>,<span class="st">&#39;sans-serif&#39;</span>:[<span class="st">&#39;Helvetica&#39;</span>],<span class="st">&#39;size&#39;</span>:<span class="dv">14</span>})
    plt.rcParams[<span class="st">&#39;ps.useafm&#39;</span>] = <span class="ot">True</span>
    <span class="co"># rc(&#39;font&#39;,**{&#39;family&#39;:&#39;sans-serif&#39;,&#39;sans-serif&#39;:[&#39;Helvetica&#39;]})</span>
    <span class="co"># plt.rcParams[&#39;pdf.fonttype&#39;] = 82</span>
    <span class="co"># matplotlib.rc(&#39;font&#39;, **font)</span>
    alpha_core=<span class="st">&#39;((segment CHA CHE and (resid 64 to 78 or resid 86 to 114 or resid 121 to 131)) or (segment CHB CHF and (resid 31 to 41 or resid 49 to 76 or resid 83 to 93))  or (segment CHC CHG and (resid 27 to 37 or resid 45 to 73 or resid 80 to 89)) or (segment CHD CHH and (resid 34 to 45 or resid 53 to 81 or resid 88 to 98))) and name CA C O N&#39;</span>
    <span class="co">#                                           15                29                    11                                      11                  28              11                                          11                  29              10                                          12              29                  11</span>



        <span class="co"># sp.plot(np.arange(0, float(edaHF.numAtoms()),1), calcSqFlucts(edaHF[i]), label=&quot;%d&quot;%(i+1),linewidth=2)</span>
        <span class="co"># sp.axvspan(HFind[&#39;H3A&#39;][0],HFind[&#39;H3A&#39;][-1] , color=&#39;blue&#39;, alpha=0.2)</span>
        <span class="co"># sp.axvline(x=HFind[&#39;H3A&#39;][1],color=&#39;k&#39;)</span>
        <span class="co"># sp.axvline(x=HFind[&#39;H3A&#39;][2],color=&#39;k&#39;)</span>
        <span class="co"># sp.axvspan(HFind[&#39;H4B&#39;][0],HFind[&#39;H4B&#39;][-1] , color=&#39;green&#39;, alpha=0.2)</span>
        <span class="co"># sp.axvline(x=HFind[&#39;H4B&#39;][1],color=&#39;k&#39;)</span>
        <span class="co"># sp.axvline(x=HFind[&#39;H4B&#39;][2],color=&#39;k&#39;)</span>
        <span class="co"># sp.axvspan(HFind[&#39;H2AC&#39;][0],HFind[&#39;H2AC&#39;][-1] , color=&#39;yellow&#39;, alpha=0.2)</span>
        <span class="co"># sp.axvline(x=HFind[&#39;H2AC&#39;][1],color=&#39;k&#39;)</span>
        <span class="co"># sp.axvline(x=HFind[&#39;H2AC&#39;][2],color=&#39;k&#39;)</span>
        <span class="co"># sp.axvspan(HFind[&#39;H2BD&#39;][0],HFind[&#39;H2BD&#39;][-1] , color=&#39;red&#39;, alpha=0.2)</span>
        <span class="co"># sp.axvline(x=HFind[&#39;H2BD&#39;][1],color=&#39;k&#39;)</span>
        <span class="co"># sp.axvline(x=HFind[&#39;H2BD&#39;][2],color=&#39;k&#39;)</span>

        <span class="co"># sp.axvspan(HFind[&#39;H3E&#39;][0],HFind[&#39;H3E&#39;][-1] , color=&#39;blue&#39;, alpha=0.2)</span>
        <span class="co"># sp.axvline(x=HFind[&#39;H3E&#39;][1],color=&#39;k&#39;)</span>
        <span class="co"># sp.axvline(x=HFind[&#39;H3E&#39;][2],color=&#39;k&#39;)</span>
        <span class="co"># sp.axvspan(HFind[&#39;H4F&#39;][0],HFind[&#39;H4F&#39;][-1] , color=&#39;green&#39;, alpha=0.2)</span>
        <span class="co"># sp.axvline(x=HFind[&#39;H4F&#39;][1],color=&#39;k&#39;)</span>
        <span class="co"># sp.axvline(x=HFind[&#39;H4F&#39;][2],color=&#39;k&#39;)</span>
        <span class="co"># sp.axvspan(HFind[&#39;H2AG&#39;][0],HFind[&#39;H2AG&#39;][-1] , color=&#39;yellow&#39;, alpha=0.2)</span>
        <span class="co"># sp.axvline(x=HFind[&#39;H2AG&#39;][1],color=&#39;k&#39;)</span>
        <span class="co"># sp.axvline(x=HFind[&#39;H2AG&#39;][2],color=&#39;k&#39;)</span>
        <span class="co"># sp.axvspan(HFind[&#39;H2BH&#39;][0],HFind[&#39;H2BH&#39;][-1] , color=&#39;red&#39;, alpha=0.2)</span>
        <span class="co"># sp.axvline(x=HFind[&#39;H2BH&#39;][1],color=&#39;k&#39;)</span>
        <span class="co"># sp.axvline(x=HFind[&#39;H2BH&#39;][2],color=&#39;k&#39;)</span>


<span class="co">#Now let&#39;s do covariance</span>
    <span class="co">#let&#39;s dump it</span>
    <span class="co">#pickle.dump(calcCrossCorr(edaHF), open( &quot;../analysis_data/hfolds_var_covar.p&quot;, &quot;wb&quot; ) )</span>
    cross_covar = pickle.load( <span class="dt">open</span>( <span class="st">&quot;../analysis_data/dnabb_covar.p&quot;</span>, <span class="st">&quot;rb&quot;</span> ) )
    <span class="co"># arange = np.arange(1656)</span>
    <span class="co"># cross_correlations = np.zeros((arange[-1]+2, arange[-1]+2))</span>
    <span class="co"># cross_correlations[arange[0]+1:,arange[0]+1:] = cross_corr</span>
    cross_covar=cross_covar[<span class="dv">0</span>:(cross_covar.shape[<span class="dv">0</span>]/<span class="dv">2</span>),:]
    <span class="dt">print</span> cross_covar.shape
    fig4=plt.figure(figsize={<span class="dv">15</span>,<span class="dv">7</span>})
    sp=fig4.add_subplot(<span class="dv">111</span>)
    cax=sp.imshow(cross_covar,interpolation=<span class="st">&#39;none&#39;</span>)
    cp=fig4.colorbar(cax,shrink=<span class="fl">0.75</span>)
    cp.set_label(<span class="st">&quot;$A^2$&quot;</span>)
    <span class="co">#sp.set_axis([arange[0]+0.5, arange[-1]+1.5, arange[0]+0.5, arange[-1]+1.5])</span>
    sp.set_title(<span class="st">&#39;Variance-covariance&#39;</span>)
    sp.set_xlabel(<span class="st">&#39;Super helix location (SHL)&#39;</span>)
    sp.set_ylabel(<span class="st">&#39;Super helix location (SHL)&#39;</span>)
    sp.set_title(<span class="st">&quot;Variance-covariance matrix for DNA backbone.&quot;</span>)

    <span class="co"># sp.set_xlim(0,100)</span>

    SHL_loc=np.array([<span class="dv">2</span>,<span class="dv">12</span>,<span class="dv">22</span>,<span class="dv">32</span>,<span class="dv">42</span>,<span class="dv">52</span>,<span class="dv">62</span>,<span class="dv">72</span>,<span class="dv">82</span>,<span class="dv">92</span>,<span class="dv">102</span>,<span class="dv">112</span>,<span class="dv">122</span>,<span class="dv">132</span>,<span class="dv">142</span>])
    SHL_loc_ticks=np.array([-<span class="dv">7</span>,-<span class="dv">6</span>,-<span class="dv">5</span>,-<span class="dv">4</span>,-<span class="dv">3</span>,-<span class="dv">2</span>,-<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>])

    SHL_loc_ticksx=np.concatenate((SHL_loc_ticks,SHL_loc_ticks))
    SHL_locx=np.concatenate((SHL_loc,SHL_loc<span class="dv">+146</span>))

    sp.set_xticks(SHL_locx)
    sp.set_xticklabels(SHL_loc_ticksx)

    sp.set_yticks(SHL_loc)
    sp.set_yticklabels(SHL_loc_ticks)
    sp.tick_params( labelright=<span class="ot">True</span>)

    sp.axvline(x=<span class="fl">145.5</span>,color=<span class="st">&#39;k&#39;</span>)
    <span class="co"># sp.axvline(x=146,color=&#39;k&#39;)</span>

    sp.annotate(<span class="st">&#39;Chain I&#39;</span>, xy=(.<span class="dv">2</span>, .<span class="dv">06</span>), xycoords=<span class="st">&#39;figure fraction&#39;</span>, horizontalalignment=<span class="st">&#39;left&#39;</span>, verticalalignment=<span class="st">&#39;top&#39;</span>,fontsize=<span class="dv">20</span>)
    sp.annotate(<span class="st">&#39;Chain J&#39;</span>, xy=(.<span class="dv">59</span>, .<span class="dv">06</span>), xycoords=<span class="st">&#39;figure fraction&#39;</span>, horizontalalignment=<span class="st">&#39;left&#39;</span>, verticalalignment=<span class="st">&#39;top&#39;</span>,fontsize=<span class="dv">20</span>)
    sp.annotate(<span class="st">&#39;Chain I&#39;</span>, xy=(.<span class="dv">817</span>, .<span class="dv">55</span>), xycoords=<span class="st">&#39;figure fraction&#39;</span>, horizontalalignment=<span class="st">&#39;left&#39;</span>, verticalalignment=<span class="st">&#39;top&#39;</span>,fontsize=<span class="dv">20</span>, rotation=<span class="dv">270</span>)

    fig4.tight_layout()
    fig4.savefig(<span class="st">&quot;../analysis_data/pca_dnabb_covar.png&quot;</span>,dpi=(<span class="dv">200</span>))

    plt.show()
    <span class="co"># savefig(&#39;../analysis_data/pca_plot.png&#39;,dpi=(200))</span>

    
    <span class="co"># writeNMD(&#39;../analysis_data/eda_DNA.nmd&#39;, edaDNA[:5], pdb.select(&quot;name P&quot;))</span>
    




<span class="kw">if</span> <span class="ot">__name__</span> == <span class="st">&#39;__main__&#39;</span>:
    main()
    </code></pre>
